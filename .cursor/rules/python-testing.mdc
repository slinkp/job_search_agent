---
description: Standards for writing Python tests using pytest, fixtures, and mocking
globs: tests/**/test*.py
alwaysApply: false
---
# Python Testing Standards

- Use pytest, not unittest.
- Prefer fixtures for reusable setup; don't prefix fixtures with `test_`.
- Mock with `mock.patch`/`mock.patch.object` and ALWAYS use `autospec=True` (or `spec=...`).
  - Use `monkeypatch` only for env vars, dicts, or import paths.
- Parameterize similar cases with `@pytest.mark.parametrize`.
- Assert contents before size (e.g., values first, then `len` if needed).

Reviewer notes:
- Reject tests without `autospec` (unless justified).
- Reject `monkeypatch` used to mock methods/functions.
